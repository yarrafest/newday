---
import Container from "@components/container.astro";
import Link from "@components/ui/link.astro";
import Dropdown from "./dropdown.astro";
import { StickyHeader, Astronav, MenuItems, MenuIcon } from "astro-navbar";
import { Image } from "astro:assets";
import LogoImage from "../../assets/yarraville-festival-logo.png";

const menuitems = [
  {
    title: "On The Day",
    path: "#",
    children: [
      { title: "Dog Parade", path: "/community-stage/dog-parade" },
      // { title: "Yarraville Village", path: "/yarraville-village" },
      // { title: "Volunteer", path: "/volunteer" },
      { title: "Getting here", path: "/getting-here" },
      // { title: "Timetable", path: "/timetable" },
      {
        title: "Community Stage",
        path: "/community-stage/",
      },
      { title: "Festival Map", path: "/festival-map" },
      // {
      //   title: "Blog Details",
      //   path: "/blog//typography-example",
      // },
      // { title: "404 Page", path: "/404" },
    ],
  },
  {
    title: "Main Stage",
    path: "/main-stage/",
  },
  {
    title: "Whats On",
    path: "/whats-on",
  },
  // {
  //   title: "Market Stalls",
  //   path: "/marketstalls/",
  // },
  // {
  //   title: "Food & Beverage",
  //   path: "/foodbeverage/",
  // },
  // {
  //   title: "Food & Beverage",
  //   path: "/blog",
  // },
  {
    title: "Kids Zone",
    path: "/kids-zone",
  },
  {
    title: "Sponsors",
    path: "/sponsors",
  },
  {
    title: "Contact",
    path: "/contact",
  },
];
---

<StickyHeader
  class="sticky top-0 z-20 border-b transition-all"
  scrollY={50}
  defaultClass="py-5 border-transparent"
  activeClass="py-2 bg-white/80 border-gray-200 backdrop-blur-lg">
  <Container>
    <div
      class="relative z-10 flex flex-col items-center justify-between lg:flex-row"
      transition:animate="none">
      <Astronav>
        <div class="flex w-full items-center justify-between lg:w-auto">
          <a
            href="/"
            class="focus-visible:shadow-outline-indigo -ml-2 flex items-center rounded-full px-2 text-lg transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2">
            <Image
              src={LogoImage}
              width="150"
              alt="Yarraville Festival logo."
            />
          </a>
          <!-- <a
            href="/"
            class="focus-visible:shadow-outline-indigo -ml-2 flex items-center rounded-full px-2 text-lg transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2"
            ><span class="font-bold text-indigo-600">Yarraville</span><span
              class="text-slate-600">Festival</span
            >
            <span
              class="ml-1 mt-0.5 rounded-md bg-gray-200 px-2 py-1 text-[10px] font-bold uppercase leading-none text-slate-700"
              >2024</span
            >
          </a> -->
          <div class="block lg:hidden">
            <MenuIcon class="h-4 w-4 text-gray-800" />
          </div>
        </div>
        <MenuItems class="mt-2 hidden w-full lg:mt-0 lg:flex lg:w-auto">
          <ul class="flex flex-col lg:flex-row lg:gap-3">
            {
              menuitems.map((item, index) => (
                <>
                  {item.children && (
                    <Dropdown
                      title={item.title}
                      children={item.children}
                      lastItem={index === menuitems.length - 1}
                    />
                  )}

                  {!item.children && (
                    <li>
                      <a
                        href={item.path}
                        class="focus-visible:shadow-outline-indigo flex rounded-full py-2 text-sm text-gray-600 transition hover:text-indigo-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 lg:px-3">
                        {item.title}
                      </a>
                    </li>
                  )}
                </>
              ))
            }
          </ul>
          <!-- <div class="mt-3 flex items-center gap-4 lg:hidden">
            <Link href="#" style="muted" block size="md">Log in</Link>
            <Link href="#" size="md" block>Try for Free</Link>
          </div> -->
        </MenuItems>
      </Astronav>
      <!-- <div>
        <div class="hidden items-center gap-4 lg:flex">
          <a
            href="#"
            class="focus-visible:shadow-outline-indigo rounded-full px-2 py-1 text-sm transition focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2"
            >Log in</a
          >
          <Link
            href="#"
            size="sm"
            class="group inline-flex items-center gap-px">
            <span>Try for Free</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 20 20"
              fill="currentColor"
              class="mt-px h-4 w-4 transition-transform group-hover:translate-x-1">
              <path
                fill-rule="evenodd"
                d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                clip-rule="evenodd"></path>
            </svg>
          </Link>
        </div>
      </div> -->
    </div>
  </Container>
</StickyHeader>
